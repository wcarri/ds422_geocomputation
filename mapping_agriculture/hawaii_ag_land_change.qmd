---
title: "land use"
format:
  pdf:
    prefer-html: true
---

# Exploring Agricultural Land Use Change in Hawai ªi (2015 ‚Üí 2020)

**DS422 ‚Äî Geocomputation in R**

In this mini-project, you will explore how agricultural land use has changed across Hawai ªi between 2015 and 2020, using openly available geospatial datasets from the Hawai ªi Statewide GIS Program. You will create maps, conduct spatial comparisons, and communicate changes in land use through engaging and informative visual storytelling.

------------------------------------------------------------------------

## ‚úÖ Data

Download the GeoJSON files and place both in your `data/` folder in your **DS422-Geocomputation** project:

| Year | Dataset | Link |
|---------------------|------------------------------|---------------------|
| 2015 | Agricultural Land Use Baseline | <https://geoportal.hawaii.gov/datasets/HiStateGIS>::agricultural-land-use-2015-baseline/about |
| 2020 | Hawai ªi Agricultural Lands | <https://geoportal.hawaii.gov/items/342ee6c7547f45ddbfc07caf4ca2887d> |

------------------------------------------------------------------------

## ‚úÖ Software Tools You May Want to Use

Mapping & Visualization: - [`mapview`](https://r-spatial.github.io/mapview/) ‚Äî fast interactive mapping - [`mapgl`](https://r-spatial.github.io/mapgl/) ‚Äî advanced vector tile maps - [`tmap`](https://cran.r-project.org/package=tmap) ‚Äî powerful thematic mapping - [`leaflet`](https://rstudio.github.io/leaflet/) ‚Äî interactive web mapping - [`ggplot2`](https://ggplot2.tidyverse.org/) ‚Äî publication-quality mapping with `geom_sf()`

Data Wrangling & Tables: - [`dplyr`](https://dplyr.tidyverse.org/) - [`tidyr`](https://tidyr.tidyverse.org/) - [`readr`](https://readr.tidyverse.org/) - [`sf`](https://r-spatial.github.io/sf/) ‚Äî essential for spatial data handling

Color & Classification: - [`RColorBrewer`](https://cran.r-project.org/package=RColorBrewer) - [`viridis`](https://cran.r-project.org/package=viridis) - [`classInt`](https://cran.r-project.org/package=classInt)

Flow Visualization: - [`ggalluvial`](https://corybrunson.github.io/ggalluvial/) ‚Äî Sankey-style flows - [`networkD3`](https://christophergandrud.github.io/networkD3/) ‚Äî interactive flow diagrams

Popups & Interactivity: - [`leafpop`](https://r-spatial.github.io/leafpop/)

You do *not* need to use all of these ‚Äî just explore what supports your creative ideas.

------------------------------------------------------------------------

## ‚úÖ Questions to Inspire You

Pick a few that interest you ‚Äî or create your own!

### üó∫Ô∏è Cartographic Design

-   What is the **highest-quality map** you can create with this data?
-   How can you improve user experience with:
    -   styling, legends, labeling, basemaps, accessibility?

### üå± Change in Agricultural Land

-   Is there **more or less** agricultural land in 2020 compared to 2015?
-   How much did agricultural acreage change **overall**?
-   Which islands gained or lost the most?
-   What is the **percent change** in total agricultural land?

### üå∫ Crop Type Changes

-   Which specific crop categories **increased or decreased** the most?
-   Can you align crop names between 2015 and 2020 to make valid comparisons?
-   Can you represent crop transitions with a **Sankey diagram**?

### üó∫Ô∏è Spatial Change Detection

-   Where did land shift **into** agriculture?
-   Where did agriculture convert to **other uses**?
-   Can you produce a **gain/loss** map of agricultural land?
-   Can you map specific crop conversions (e.g., Coffee ‚Üí Pasture)?

------------------------------------------------------------------------

## ‚≠ê Creative Expansion Ideas

These are optional, but may spark ideas: - Compare **island-level** land use change - Create a **story map** or interactive dashboard - Add **contextual layers** such as roads or county boundaries - Focus on one island to provide a **deep spatial narrative** - Provide **policy or environmental implications** of these changes

------------------------------------------------------------------------

## üéØ Deliverable

Your mini-presentation should: ‚úÖ Ask an interesting question\
‚úÖ Analyze change over time and space\
‚úÖ Include at least one map and one additional visual\
‚úÖ Clearly explain why your findings matter

üìå During the **last 20 minutes of class**, each student will: - Share their screen - Present **for 2 minutes** - Show the **map(s)** and **insights** they are most proud of

------------------------------------------------------------------------

## üß† Your Turn

You are encouraged to:

-   Explore

-   Experiment

-   Tell a spatial story

```{r}
library(tidyr)
library(tmap)
library(mapview)
library(dplyr)
library(sf)
library(RColorBrewer)
library(ggalluvial)
```

```{r}
agri2020 <- st_read("data/Agricultural_Land_Use_-_2020_Update.geojson")
```

```{r}
agri2015 <- st_read("data/Agricultural_Land_Use_-_2015_Baseline.geojson")
```

```{r, eval = knitr::is_html_output()}
mapview(agri2020, zcol = "crops_2020", legend = TRUE)
```

```{r, eval = knitr::is_html_output()}
mapview(agri2015, zcol = "cropcatego", legend = TRUE)

```

::: {.callout-tip icon="üí°"}
1.  Which specific crop categories **increased or decreased** the most?
:::

```{r}
# summaries
sum15 <- agri2015 %>%
  st_drop_geometry() %>%
  group_by(cropcatego) %>%
  summarise(acreage15 = sum(acreage, na.rm = TRUE))

sum20 <- agri2020 %>%
  st_drop_geometry() %>%
  group_by(crops_2020) %>%
  summarise(acreage20 = sum(acreage, na.rm = TRUE))
```

```{r}
# compare
compare_agri <- full_join(sum15, sum20, by = c("cropcatego" = "crops_2020")) %>%
  mutate(acreage15 = replace_na(acreage15, 0), acreage20 = replace_na(acreage20, 0), change = acreage20 - acreage15)
```

```{r}
# results
compare_agri %>%
  ggplot(aes(x = reorder(cropcatego, change), y = change,
             fill = change > 0)) +
  geom_col() +
  geom_text(aes(label = round(change, 1)),
            hjust = ifelse(compare_agri$change > 0, -0.2, 1.2),
            size = 4) +
  coord_flip() +
  scale_fill_manual(values = c("TRUE" = "#27AD61", "FALSE" = "#44015F"),
                    labels = c("Decrease", "Increase")) +
  labs(
    title = "Change in Crop Type Crop Acreage",
    subtitle = "Hawaii (2015 to 2020)",
    x = "Crop Type",
    y = "Acreage Change",
    fill = "Change"
  ) +
  theme_minimal(base_size = 14) +
  theme(plot.margin = margin(10, 40, 10, 10))
```

------------------------------------------------------------------------

::: {.callout-tip icon="üí°"}
2.  Can you represent crop transitions with a **sankey diagram**?
:::

```{r}
alluvial_data <- compare_agri %>%
  select(cropcatego, acreage15, acreage20) %>%
  pivot_longer(cols = starts_with("acreage"),
               names_to = "year",
               values_to = "acreage") %>%
  mutate( year = ifelse(year == "acreage15", "2015", "2020"))
```

```{r}
# reshape data
alluvial_data <- compare_agri %>%
  select(cropcatego, acreage15, acreage20) %>%
  pivot_longer(cols = starts_with("acreage"),
               names_to = "year",
               values_to = "acreage") %>%
  mutate(year = ifelse(year == "acreage15", "2015", "2020"))
```

```{r}
library(viridis)

ggplot(alluvial_data, aes(x = year, y = acreage, alluvium = cropcatego, stratum = cropcatego, fill = cropcatego)) +

  geom_flow(alpha = 0.45) +
  geom_stratum(width = 0.25, alpha = 0.9) +

  scale_fill_viridis_d(option = "viridis", name = "Crop Type"
  ) +

  labs(
    title = "Crop Type Acreage Changes",
    subtitle = "Hawaii (2015 to 2020)",
    x = "Year",
    y = "Acreage"
  ) +

  theme_minimal(base_size = 14) +
  theme(
    legend.position = "right",
    legend.title = element_text(),
    legend.key.height = unit(0.6, "cm")
  )

```

## üß† Findings

Agricultural land in Hawai ªi is changing ‚Äî what can you reveal about¬†*how*¬†and¬†*why*? This mini-project shows that agricultural land use across Hawai ªi shifted noticeably from 2015 to 2020. The bar chart of crop acreage change highlights a major drop in sugar land. This fits with Hawai ªi‚Äôs long history of sugar plantations and the eventual shutdown of the last remaining operations. The chart also shows a decline in dairy land.

In contrast, pasture and diversified crops increased during this period. This suggests more land is being used for ranching and for a wider mix of smaller crop types. The alluvial diagram helps illustrate how large pasture areas are compared to other categories and how they remain a dominant land use in both years. Overall, these patterns indicate that Hawai ªi is moving away from plantation-style agriculture and toward ranching and more diverse farming.

For future projects, it would be interesting to explore how these shifts vary by island. I would also like to examine how former plantation lands were distributed across the islands. In other words, which islands had the largest areas of plantation land, and how have those lands changed over time?
